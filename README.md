# Music Album Guide
## Сервис, предоставляющий информацию о музыкальных альбомах

### Описание проекта:
Проект состоит из сервисов фронтенда (Django, drf, httpx), бэкенда (Django, drf) и СУБД PostgreSQL, демонстрирует взаимодействие клиента фронтенда с API бэкенда, на чьей стороне происходит работа с данным, в том числе сортировка запрашиваемых данных.
На стороне фронтенда происходит десериализация полученных данных и отрисовка шаблона заполняемой ими таблицы (server-side rendering). В таблице предусмотрена возможность сортировки записей по столбцами "название альбома" и "имя артиста".

## Развертывание проекта:
### 1. Файлы с настройками
Переменные окружения, необходимые для работы проекта,
загружаются при его запуске из файла
****.env**** - для рабочего запуска
и ****.local.env**** - для локального запуска.
Образец их заполнения содержиться в файле ****default.env****. Обратите внимание на разность значений 
BACKEND_HOST и DB_HOST для локальной и итоговой версии.

### 2. Использование Makefile'a
Для запуска необходимых команд в проекте испрользуются Makefile'ы, запускаемые программой make (на Linux-системах make чаще всего входит в стандартную поставку, на Windows рекомендуется установить make отдельно, иначе для запуска нужных команд предлагается посмотреть содержимое Makefile'ов)

Для запуска проекта нужно запусить его сервисы в docker-compose, выполнив в его корневой директории команду:
```bash
make install
```
Для заполнения базы данных из csv-файлов-источников (которые расположены в поддиректории проекта /source и должны называться albums.csv, artists.csv, tracks.csv (их можно редактировать или заменять по своему усмотрению)) нужно выполнить следующую команду:
```bash
make populate.db
```

Для остановки контейнеров:
```bash
make down
```
Для вывода логов контейнеров доступны следующие команды:

логи базы данных:
```bash
make postgres.logs
```
логи backend'а:
```bash
make backend.logs
```
логи frontend'a:
```bash
make frontend.logs
```

## Запуск сервисов для их отладки
С целью отладки можно запускать сервисы backend'а и frontend'а локально.
Для этого предварительно нужно запустить отдельно контейнер отладочной базы данных (Postgres):
```bash
make local.db.install
```
для остановки этого контейнера:
```bash
make local.db.down
```
Далее для запуска нужного сервиса необходимо перейти в соответствующую директорию и использовать таргеты из Makefile'ов в них.

Локально страница фронтенда доступна по адресу
[a link](http://localhost:7000/index)

Backend A.P.I.: [a link](http://localhost:8000/api/v1/albums/?sorting=album)